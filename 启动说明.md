# 🚀 启动说明

## 后端启动（Python Flask）

### 方法1：使用虚拟环境的Python（推荐）

```bash
# 进入后端目录
cd /Users/wuye/code/blog/hhg-tools/backend

# 使用虚拟环境的Python启动
./venv/bin/python app.py
```

### 方法2：激活虚拟环境后启动

```bash
# 进入后端目录
cd /Users/wuye/code/blog/hhg-tools/backend

# 激活虚拟环境
source venv/bin/activate

# 启动应用
python app.py

# 退出虚拟环境（可选）
deactivate
```

### 方法3：后台运行

```bash
cd /Users/wuye/code/blog/hhg-tools/backend

# 后台运行并输出日志到文件
nohup ./venv/bin/python app.py > backend.log 2>&1 &

# 查看日志
tail -f backend.log

# 停止后台进程
ps aux | grep "python app.py"  # 找到进程ID
kill <进程ID>
```

### 方法4：使用bash绕过zsh错误

```bash
bash -c "cd /Users/wuye/code/blog/hhg-tools/backend && ./venv/bin/python app.py"
```

---

## 前端启动（Vue + Vite）

### 方法1：直接启动

```bash
# 进入前端目录
cd /Users/wuye/code/blog/hhg-tools/frontend

# 启动开发服务器
yarn dev
```

### 方法2：使用npm

```bash
cd /Users/wuye/code/blog/hhg-tools/frontend
npm run dev
```

### 方法3：使用bash绕过zsh错误

```bash
bash -c "cd /Users/wuye/code/blog/hhg-tools/frontend && yarn dev"
```

---

## 🔍 验证服务状态

### 检查后端（5001端口）

```bash
# 方法1：curl测试
curl --noproxy "*" http://localhost:5001/api/health

# 方法2：检查端口占用
lsof -i:5001

# 方法3：检查进程
ps aux | grep "python app.py"
```

### 检查前端（3000端口）

```bash
# 方法1：curl测试
curl --noproxy "*" http://localhost:3000

# 方法2：检查端口占用
lsof -i:3000

# 方法3：浏览器访问
open http://localhost:3000  # macOS
```

---

## 🛑 停止服务

### 停止后端

```bash
# 找到进程
lsof -ti:5001

# 停止进程（替换<PID>为实际进程号）
kill <PID>

# 或者强制停止
kill -9 <PID>
```

### 停止前端

```bash
# 如果在前台运行，按 Ctrl+C

# 如果在后台运行
lsof -ti:3000
kill <PID>
```

---

## 📊 常用命令组合

### 一次性启动所有服务（分别在两个终端）

**终端1 - 启动后端：**
```bash
cd /Users/wuye/code/blog/hhg-tools/backend && ./venv/bin/python app.py
```

**终端2 - 启动前端：**
```bash
cd /Users/wuye/code/blog/hhg-tools/frontend && yarn dev
```

### 一键重启所有服务

```bash
# 停止旧服务
lsof -ti:5001 | xargs kill 2>/dev/null
lsof -ti:3000 | xargs kill 2>/dev/null

# 启动后端（后台）
cd /Users/wuye/code/blog/hhg-tools/backend && nohup ./venv/bin/python app.py > backend.log 2>&1 &

# 启动前端
cd /Users/wuye/code/blog/hhg-tools/frontend && yarn dev
```

---

## 🔧 生产环境部署

### 使用 Gunicorn 运行后端

```bash
cd /Users/wuye/code/blog/hhg-tools/backend

# 安装 gunicorn
./venv/bin/pip install gunicorn

# 启动（4个worker进程）
./venv/bin/gunicorn -w 4 -b 0.0.0.0:5001 app:app

# 后台运行
nohup ./venv/bin/gunicorn -w 4 -b 0.0.0.0:5001 app:app > gunicorn.log 2>&1 &
```

### 构建前端静态文件

```bash
cd /Users/wuye/code/blog/hhg-tools/frontend

# 构建生产版本
yarn build

# 生成的文件在 dist/ 目录
# 可以用任何静态文件服务器部署，如 nginx
```

---

## ⚡ 快速启动（复制粘贴）

```bash
# 一行命令启动后端（后台）
cd /Users/wuye/code/blog/hhg-tools/backend && ./venv/bin/python app.py &

# 一行命令启动前端
cd /Users/wuye/code/blog/hhg-tools/frontend && yarn dev
```

---

## 💡 提示

1. **首次启动前确保依赖已安装**：
   - 后端：`cd backend && ./venv/bin/pip install -r requirements.txt`
   - 前端：`cd frontend && yarn install`

2. **如果修改了代码**：
   - 后端：需要重启服务
   - 前端：Vite 会自动热重载，无需重启

3. **查看实时日志**：
   - 后端：`tail -f backend/backend.log`（如果后台运行）
   - 前端：直接在终端查看输出

